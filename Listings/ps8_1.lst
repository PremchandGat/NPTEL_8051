C51 COMPILER V9.60.7.0   PS8_1                                                             06/15/2023 15:09:22 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE PS8_1
OBJECT MODULE PLACED IN .\Objects\ps8_1.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ps8_1.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\ps8
                    -_1.lst) TABS(2) OBJECT(.\Objects\ps8_1.obj)

line level    source

   1          #include <at89c5131.h>
   2          
   3          sbit pin1 = P1^6;
   4          
   5          int freq  = 0;
   6          int loop  = 0;
   7          
   8          int freqTimerH[] = {0xEF, 0xF1, 0xF2, 0xF3, 0xF5, 0xF6, 0xF7, 0xF7};
   9          int freqTimerL[] = {0xBA, 0x89, 0xFB, 0xCB, 0x27, 0x3C, 0x52, 0xDD};
  10          
  11          int onTimer[]    =  {15, 15, 15, 22, 22, 30, 30, 30};
  12          int onTimerH[]   =  {0xBD, 0xBD, 0xBD, 0x1C, 0x1C, 0x7B, 0x7B, 0x7B};
  13          int onTimerL[]   =  {0xC0, 0xC0, 0xC0, 0xA0, 0xA0, 0x80, 0x80, 0x80};
  14          
  15          void timer0I() interrupt 1  
  16          {
  17   1        pin1 = ~pin1; 
  18   1        TH0 = freqTimerH[freq];   
  19   1        TL0 = freqTimerL[freq];  
  20   1      } 
  21          
  22          void timer1I() interrupt 3
  23          {
  24   1        
  25   1        if(loop < onTimer[freq] && freq  <= 7){
  26   2          loop++;
  27   2          return;
  28   2        }
  29   1        
  30   1        if(loop == onTimer[freq] && freq  <= 7){
  31   2          TH1 = onTimerH[freq];
  32   2          TL1 = onTimerL[freq];
  33   2          loop++;
  34   2          return;
  35   2        }
  36   1        
  37   1          if(freq > 7) {
  38   2          freq = 0;
  39   2          } else {
  40   2            freq++;
  41   2          }
  42   1          loop = 0;
  43   1      }
  44          
  45          
  46          void main(){
  47   1        
  48   1        // Enable Interupts
  49   1        EA  = 1;
  50   1        
  51   1        // Enable Interupts for Timer
  52   1        ET0 = 1;
  53   1        ET1 = 1;
  54   1        
C51 COMPILER V9.60.7.0   PS8_1                                                             06/15/2023 15:09:22 PAGE 2   

  55   1        // Timer Mode
  56   1        TMOD = 0x11;
  57   1        
  58   1        TH0 = freqTimerH[freq];   
  59   1        TL0 = freqTimerL[freq];  
  60   1        
  61   1        // Timer 1 Timer
  62   1        TH1 = 0x00;   
  63   1        TL1 = 0x00; 
  64   1        
  65   1        // Start timer 0
  66   1        TR0 = 1;
  67   1        
  68   1        // Start timer 1
  69   1        TR1 = 1;
  70   1        
  71   1        while(1);
  72   1        
  73   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    249    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     84    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
